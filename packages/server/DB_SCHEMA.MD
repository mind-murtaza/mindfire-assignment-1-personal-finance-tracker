# ðŸ“„ Users Collection Schema

## Purpose
Stores user identity, credentials, and application settings.

## Indexes
- `{ email: 1 }` (unique, background)
- `{ status: 1 }` (background)
- `{ status: 1, lastLoginAt: -1 }` (compound, background)

## Schema Definition
```javascript
const UserSchema = {
  _id: ObjectId, // MongoDB ObjectId
  email: String, // Indexed, Unique, Required, Lowercased
  password: String, // Hashed, Required, Not selected by default

  profile: {
    firstName: String, // Required, Only letters
    lastName: String, // Required, Only letters
    avatarUrl: String, // Optional, URL to user's avatar image
    mobileNumber: String, // Optional, 10-digit format
  },

  settings: {
    mobileDialCode: String, // Default: '+91', Validated against known dial codes
    currency: String, // Default: 'INR', ISO 4217 currency codes
    theme: String, // Default: 'system', Enum: ['system', 'light', 'dark']
  },

  status: String, // Required, Enum: ['active', 'suspended', 'pending_verification', 'deleted']

  lastLoginAt: Date, // Nullable, Tracks last login time
  createdAt: Date, // Auto-generated by Mongoose
  updatedAt: Date, // Auto-generated by Mongoose
};
```

## Validation Rules
- **Email**: Must be a valid email format, lowercased, and unique.
- **Password**: Must be at least 8 characters, include uppercase, lowercase, number, and special character.
- **First Name & Last Name**: Only letters, max 50 characters.
- **Mobile Number**: 10-digit format.
- **Mobile Dial Code**: Must be a valid dial code.
- **Currency**: Must be a valid ISO 4217 code.
- **Theme**: Must be one of 'system', 'light', or 'dark'.
- **Status**: Must be one of 'active', 'suspended', 'pending_verification', or 'deleted'.

## Security & Performance
- Passwords are hashed using bcrypt before saving.
- Sensitive fields like password are not selected by default in queries.
- Indexes are created in the background to avoid blocking operations.
- Compound indexes optimize common query patterns for performance.


